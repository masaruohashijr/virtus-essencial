<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>E10.1. Carga inicial da ES via Sigas</title>
<link rel="stylesheet" type="text/css" href="../../../estilos.css"
	media="screen" />
</head>
<body>
	<table class="exemplos">
		<tr>
			<th>Data</th>
			<th>Versão</th>
			<th>Descrição</th>
			<th>Autor</th>	
		</tr>
		<tr>
			<td>26/03/2014</td>
			<td>1.0</td>
			<td>Versão inicial - Criação do documento e especificação.</td>
			<td>Eliane/DIREC</td>
		</tr>
		<tr>
			<td>31/03/2014</td>
			<td>1.1</td>
			<td>Nome da ES não está disponível no Sigas.<br>
				Nome da ES está disponível no unicad.</td>
			<td>Eliane/DIREC</td>
		</tr>
		<tr>
			<td>02/04/2014</td>
			<td>1.2</td>
			<td>Alterações no modelo de dados.<br>
				Escopo da iteração 01.</td>
			<td>Eliane/DIREC</td>
		</tr>				
		<tr>
			<td>08/04/2014</td>
			<td>1.3</td>
			<td>Alterações após a Iteração 01 (<a href="#E10_1_1"><b>ver modelo de dados</b></a>).</td>
			<td>Eliane/DIREC</td>
		</tr>
		<tr>
			<td>09/04/2014</td>
			<td>1.4</td>
			<td>Correção na entidade ENS (<a href="#E10_1_1"><b>ver modelo de dados</b></a>).</td>
			<td>Eliane/DIREC</td>
		</tr>		
	</table>
	<h2><a id="E10_1">E10.1 Carga inicial da ES via Sigas- Iteração 01</a></h2>
	
	<h3>Pré-requisitos</h3>
	<blockquote>
	<p>Deve existir uma metodologia default do SRC no estado Concluída cadastrada no sistema.</p>
	<p>Caso contrário exibir uma mensagem de erro: Não há metodologia default cadastrada.</p>
	</blockquote>
	<h3>Item de menu</h3>
	<blockquote>
	<p>Não disponível nesta iteração.</p>
	</blockquote>
	<h3>Descrição</h3>
	<blockquote>
	<p>Esta funcionalidade carrega os dados das ESs (Entidades Supervisionáveis) a partir do Sigas.</p>
	<p>Devem ser consultadas as Entidades Supervionáveis alocadas à equipes de supervisão.</p>
	<p>Em geral, teremos conglomerados ou entidade independentes.</p>
	<p>Alguns dados da ES não estarão disponíveis no Sigas. São eles:</p>
	<ul>
		<li>Prioridade da ES: usada para gerar uma data prevista para o corec.</li>
		<li>Estado da ES: informa se a ES está selecionada para fazer parte de um ciclo de supervisão ou não.</li>
	</ul>
	Outras informações importantes:
	<ul>
		<li>Carga via ETL sem integração com o unicad. </li>
		<li>A integração com o unicad permitiria remover as entidades cujo conglomerado já está sendo supervisionado.</li>
		<li>Na data corrente o universo fiscalizável corresponde a 426 ESs, sendo que apenas 139 pertecem ao SRC.</li>
		<li>Carga com periodiciade diária.</li>
	</ul>
	</blockquote>

	<h3>Regras específicas</h3>
	<blockquote>
	<ul>
		<li>Trata-se da Carga inicial de ES via Sigas;</li>
	</ul> 
		<h3>Dados da entidade supervisionável:</h3>
		<table class="exemplos">
			<tr>
				<th>Nome</th>
				<th>Objetivo</th>
				<th>Domínio</th>
				<th>Obrigatório?</th>
				<th>Observações</th>
			</tr>
			<tr>
				<td>Nome</td>
				<td>Nome da entidade supervisionável</td>
				<td>Texto com tamanho máximo 30 caracteres.</td>
				<td>Sim</td>
				<td>Não disponível no Sigas.<br>
					Disponível no Unicad.</td>
			</tr>
			<tr>
				<td>Código do conglomerado ou CNPJ</td>
				<td>Código do conglomerado ou CNPJ da ES no Sigas</td>
				<td>Texto com tamanho exato 8 caracteres.</td>
				<td>Sim</td>
				<td>Disponível no Sigas.</td>
			</tr>
			<tr>
				<td>Equipe responsável</td>
				<td>Equipe responsável pela ES no Sigas.</td>
				<td>Texto com tamanho máximo 30 caracteres.</td>
				<td>Sim</td>
				<td>Disponível no Sigas.</td>
			</tr>
			<tr>
				<td>Supervisor responsável</td>
				<td>Supervisor responsável pela ES no Sigas através de sua matrícula.</td>
				<td>Texto com tamanho máximo 8 caracteres.</td>
				<td>Sim</td>
				<td>Disponível no Sigas.</td>
			</tr>			
			<tr>
				<td>Pertence ao SRC</td>
				<td>Atributo binário que identifique ES que pertencem ao ciclo de supervisão.</td>
				<td>Domínio:
					<ul>
						<li>1 - Sim</li>
						<li>2 - Não</li>
					</ul>
				</td>
				<td>Sim</td>
				<td>Haverá uma carga inicial destes valores. <br>
					Não disponível no Sigas.
				</td>
			</tr>
			<tr>
				<td>Metodologia da ES</td>
				<td>Metodologia usada no ciclo SRC da ES.</td>
				<td>&nbsp;</td>
				<td>Sim</td>
				<td>Valor inicial: metodologia SRC default no estado concluída, disponível no SRC.<br>
					Não disponível no Sigas.
				</td>
			</tr>
			<tr>
				<td>Prioridade da ES</td>
				<td>Metodologia usada no ciclo SRC da ES.</td>
				<td>Domínio:
					<ul>
						<li>1 - SIFI</li>
						<li>2 - muito alta</li>
						<li>3 - alta</li>
						<li>4 - média</li>
						<li>5 - baixa</li>
					</ul>
				</td>
				<td>Não</td>
				<td>Podendo ser nulo.<br>
					Haverá uma carga inicial destes valores.</td>
			</tr>			
			<tr>
				<td>Data da inclusão</td>
				<td>Data da inclusão da ES.</td>
				<td>&nbsp;</td>
				<td>Sim</td>
				<td>&nbsp;</td>
			</tr>
			<tr>
				<td>Data e hora da alteração</td>
				<td>Data e hora da última alteração da ES.</td>
				<td>&nbsp;</td>
				<td>Sim</td>
				<td>&nbsp;</td>
			</tr>
			<tr>
				<td>Usuário responsável pela última alteração</td>
				<td>Unidade e login do usuário responsável pela última alteração da ES.</td>
				<td>&nbsp;</td>
				<td>Sim</td>
				<td>&nbsp;</td>
			</tr>
		</table>
	</blockquote>
	<h2><a id="#E10_1_1">Alterações após a Iteração 01</a></h2>
	<p>Localização e supervisor responsável passam a ser atributos da própria ES.</p>
	
	<h2>Cenários de teste para <a href="TestE10_1_carga_inicial_de_ES_via_Sigas.html">E10.1. Carga inicial de ES via Sigas</a>.</h2>
	<h2>Modelo de dados para E10.1. Carga inicial de ES via Sigas.</h2>
<br><br>	
DROP TABLE SUP.PIF_PAR_INST_FINAN
<br><br>
DROP TABLE EQI_EQUIPE_IF
<br><br>
DROP TABLE SER_SERVIDOR_SUP
<br><br>
<!-- CREATE TABLE SUP.EQI_EQUIPE
(
   EQI_ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
   EQI_DS_LOCALIZACAO varchar(30) NOT NULL,
   EQI_CD_MAT_SUPERV char(8)
)
<br><br>
comment on table SUP.EQI_EQUIPE is
'/NOME: Equipe responsável pela Entidade supervisionável (ENS)
/FONTE: Sistema Sigas.';
<br><br>
comment on column SUP.EQI_EQUIPE.EQI_ID is 
'/NOME: Identificador de registro.
/FUNÇÃO: Identificar unicamente o registro na tabela.
/DOMÍNIO:
/FONTE: Gerado automaticamente pelo sistema.';
<br><br>
comment on column SUP.EQI_EQUIPE.EQI_DS_LOCALIZACAO is 
'/NOME: Descrição da localização da equipe responsável pela ES.
/EXEMPLO: DESUP/GTBHO/COSUP-01 .
/FONTE: Sistema Sigas.';
<br><br>
comment on column SUP.EQI_EQUIPE.EQI_CD_MAT_SUPERV is 
'/NOME: Matrícula do supervisor responsável na equipe. Corresponde ao coordenador em exercício no siarh.
/FUNÇÃO: Identificar a matrícula do supervisor da ES
/DOMÍNIO:
/FONTE: Informado pelo usuário.';
<br><br> -->
CREATE TABLE SUP.ENS_ENTIDADE_SUPERVISIONAVEL
(
   ENS_ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
   ENS_CD_CNPJ CHAR(8) NOT NULL,
   ENS_NM VARCHAR(30) NOT NULL,
   ENS_IB_PERTENCE_SRC SMALLINT NOT NULL,
   ENS_CD_PRIORIDADE INTEGER,
   ENS_DS_LOCAL_RESP varchar(30) NOT NULL,
   ENS_CD_MAT_SUP_RESP char(8) NOT NULL,
   ENS_NU_VERSAO int NOT NULL,
   ENS_DT_INCLUSAO DATE NOT NULL,
   ENS_CD_OPER_ATUALZ CHAR(20) NOT NULL,
   ENS_DH_ATUALZ TIMESTAMP NOT NULL,
   MET_ID INTEGER NOT NULL
)
<br><br>
comment on table SUP.ENS_ENTIDADE_SUPERVISIONAVEL is
'/NOME: Entidade supervisionável (ENS)
/FUNÇÃO: Registrar as informações de uma entidade supervisionável (ES). 
/FONTE: Dados informados pelo usuário e gerados pelo sistema.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.ENS_ID is 
'/NOME: Identificador de registro.
/FUNÇÃO: Identificar unicamente o registro na tabela.
/DOMÍNIO:
/FONTE: Gerado automaticamente pelo sistema.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.ENS_CD_CNPJ is 
'/NOME: Código conglomerado ou CNPJ da ES.
/FUNÇÃO: Identificar o código conglomerado ou CNPJ da ES.
/DOMÍNIO:
/FONTE: Dado informado pelo usuário.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.ENS_NM is 
'/NOME: Nome da ES.
/FUNÇÃO: Identificar o nome da ES.
/DOMÍNIO:
/FONTE: Dado informado pelo usuário.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.ENS_IB_PERTENCE_SRC is 
'/NOME: Atributo logico para identifcar se a ES pertence ao SRC.
/FUNÇÃO: Identificar se a ES pertence ao SCR.
/DOMÍNIO: 1 - Sim; 2 - Não.
/FONTE: Dado informado pelo usuário.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.ENS_CD_PRIORIDADE is 
'/NOME: Prioridade da ES.
/FUNÇÃO: Identificar a prioridade da metodologia.
/DOMÍNIO: 1 - SIFI; 2 - Muito alta; 3 - Alta; 4 - Média; 5 - Baixa.
/FONTE: Informado pelo usuário.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.ENS_DS_LOCAL_RESP is 
'/NOME: Descrição da localização da equipe responsável pela ES.
/EXEMPLO: DESUP/GTBHO/COSUP-01 .
/FONTE: Sistema Sigas.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.ENS_CD_MAT_SUP_RESP is 
'/NOME: Matrícula do supervisor responsável pela ES.
/FONTE: Sistema Sigas.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.ENS_NU_VERSAO is 
'/NOME: Número de versão para controle de concorrência.
/FUNÇÃO: Identificar o número de versão para controle de concorrência.
/FONTE: Gerado pelo sistema.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.ENS_DT_INCLUSAO is 
'/NOME: Data da inclusão.
/FUNÇÃO: Identificar a data da inclusão da ES.
/FONTE: Gerado pelo sistema.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.ENS_CD_OPER_ATUALZ is 
'/NOME: Código do operador responsável pela última operação realizada sobre esta versão do registro.
/FUNÇÃO: Registrar, para fins de histórico e auditoria, o código do operador responsável pela última operação (inclusão ou aleração) realizada sobre esta versão do registro.
/DOMÍNIO:
/FONTE: Gerado pelo sistema.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.ENS_DH_ATUALZ is 
'/NOME: Momento da última operação realizada sobre esta versão do registro.
/FUNÇÃO: Registrar, para fins de histórico e auditoria, o momento exato da última operação (inclusão ou aleração) realizada sobre esta versão do registro.
/DOMÍNIO:
/FONTE: Gerado pelo sistema.';
<br><br>
comment on column SUP.ENS_ENTIDADE_SUPERVISIONAVEL.MET_ID is 
'/NOME: Identificador da metodologia.
/FUNÇÃO: Referenciar a metodologia associada a ES.
/DOMÍNIO:
/FONTE: Dados informados pelo usuário e gerados pelo sistema.';
<br><br>
ALTER TABLE SUP.ENS_ENTIDADE_SUPERVISIONAVEL ADD FOREIGN KEY
(
   MET_ID
)
REFERENCES SUP.MET_METODOLOGIA
(
   MET_ID
)
<br><br>
<!-- ALTER TABLE SUP.ENS_ENTIDADE_SUPERVISIONAVEL ADD FOREIGN KEY
(
   EQI_ID
)
REFERENCES SUP.EQI_EQUIPE
(
   EQI_ID
) -->
<br><br>
	
</body>
</html>
